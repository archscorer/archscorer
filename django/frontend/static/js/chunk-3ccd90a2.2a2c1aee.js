(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ccd90a2"],{"74c6":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.s?e("v-container",[e("v-layout",{attrs:{"text-center":"",wrap:""}},[e("v-card",[e("v-card-title",{domProps:{textContent:t._s(t.s.name)}}),e("v-card-text",[e("p",{domProps:{textContent:t._s(t.s.description)}})]),e("seriesSummary")],1)],1)],1):e("v-overlay",[e("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)},n=[],r=e("5530"),i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("v-sheet",[e("v-card",{staticClass:"mb-5"},[e("v-card-title",[e("small",[t._v("Archers Summary")]),e("v-spacer"),e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.s_search,callback:function(s){t.s_search=s},expression:"s_search"}})],1),e("v-data-table",{attrs:{"mobile-breakpoint":300,dense:"",headers:t.s_table_header,items:t.s_table,search:t.s_search,loading:t.loading,"group-by":"class","multi-sort":"","items-per-page":50}})],1),t.s.club_ranking?e("v-card",[e("v-card-title",[e("small",[t._v("Clubs Summary")]),e("v-spacer")],1),e("v-data-table",{attrs:{"mobile-breakpoint":300,dense:"",headers:t.c_table_header,items:t.c_table,loading:t.loading,"multi-sort":"","items-per-page":15}})],1):t._e()],1)},u=[],c=e("2909"),l=e("b85c"),o=(e("d81d"),e("b0c0"),e("d3b7"),e("25f0"),e("fb6a"),e("7db0"),e("4de4"),e("4ec9"),e("3ca3"),e("ddb0"),e("c740"),e("07ac"),e("a434"),e("ac1f"),e("1276"),e("a676")),p=e("2f62"),f={components:{},data:function(){return{s_search:""}},computed:Object(r["a"])(Object(r["a"])({},Object(p["d"])({user:function(t){return t.user.user}})),{},{s:function(){return this.$store.getters["series/seriesById"](parseInt(this.$route.params.id))},loading:function(){if(this.s_table.length)return!1;if(this.s){var t,s=Object(l["a"])(this.s.stages);try{for(s.s();!(t=s.n()).done;){var e=t.value;if(Array.isArray(e.participants))return!1}}catch(a){s.e(a)}finally{s.f()}}return!0},s_table_header:function(){if(this.s){var t=[{text:"Class",value:"class"},{text:"Place",value:"place",width:"1%"},{text:"Name",value:"name",width:"175px"},{text:"Club",value:"club"},{text:"Points",value:"points"},{text:"Sum",value:"sum"}];return t.push.apply(t,Object(c["a"])(this.s.stages.map((function(t){return{text:t.name,value:"stage"+t.id.toString(),class:"stage-header"}})).reverse())),t}return[]},c_table_header:function(){if(this.s_table&&this.s.club_ranking){var t=[{text:"Place",value:"place",width:"1%"},{text:"Club",value:"club"},{text:"Points",value:"points"}];return t.push.apply(t,Object(c["a"])(this.s.stages.map((function(t){return{text:t.name,value:"stage"+t.id.toString(),class:"stage-header"}})).reverse())),t}return[]},s_table:function(){var t=this;if(this.s){var s,e=[],a=Object(l["a"])(this.s.stages);try{var n=function(){var a=s.value;if(!Array.isArray(a.participants))return"continue";var n=a.rounds.find((function(t){return"s"===t.course_details.type}));n=n?n.id:null;var r=a.participants.map((function(s){return{name:s.archer.full_name,class:o["a"].getClass(s,t.s.ignore_gender),id:s.archer.id+s.age_group+s.style,club:s.archer.club_details.name_short,sum:o["a"].sum(s.scorecards.filter((function(t){return t.round!==n})).map((function(t){return t.score}))),x:o["a"].sum(s.scorecards.filter((function(t){return t.round!==n})).map((function(t){return t.spots}))),shootoff:n?o["a"].sum(s.scorecards.filter((function(t){return t.round===n})).map((function(t){return t.score}))):null}}));o["a"].participantRank(r);var i,u=r.reduce((function(t,s){return t.set(s.class,(t.get(s.class)||0)+1)}),new Map),c={class:null,points:null},p=Object(l["a"])(r.filter((function(t){return t.sum>0})));try{var f=function(){var s=i.value;s.class!==c.class&&(c.class=s.class,c.points=Math.min(t.s.points_max,u.get(s.class))),s.points=c.points>=s.place&&s.sum>0?c.points-s.place+1:0;var n=e.findIndex((function(t){return t.id===s.id}));-1===n?(e.push({id:s.id,class:s.class,name:s.name,club:s.club,sum:[s.sum],points:[s.points]}),e[e.length-1]["stage"+a.id.toString()]=(s.points>0?s.points:"-")+" ("+s.sum+")"):(e[n].sum.push(s.sum),e[n].points.push(s.points),e[n]["stage"+a.id.toString()]=(s.points>0?s.points:"-")+" ("+s.sum+")")};for(p.s();!(i=p.n()).done;)f()}catch(d){p.e(d)}finally{p.f()}};for(a.s();!(s=a.n()).done;)n()}catch(c){a.e(c)}finally{a.f()}for(var r=function(){var s=u[i];s.sum.sort((function(t,e){return s.points[s.sum.indexOf(e)]-s.points[s.sum.indexOf(t)]})),s.points.sort((function(t,s){return s-t})),s.points.length>=t.s.participant_min&&(s.place=null),s.points.length>=t.s.participant_max?(s.points=o["a"].sum(s.points.slice(0,t.s.participant_max)),s.sum=o["a"].sum(s.sum.slice(0,t.s.participant_max))):(s.points=o["a"].sum(s.points),s.sum=o["a"].sum(s.sum))},i=0,u=e;i<u.length;i++)r();return e.sort((function(t,s){return t.class<s.class?-1:t.class>s.class||t.points<s.points?1:t.points>s.points?-1:t.sum<s.sum?1:t.sum>s.sum?-1:0})).map((function(s){return s.class!==t.class&&(t.class=s.class,t.ord=1,t.place=1,t.points=s.points,t.sum=s.sum),null===s.place&&s.points>0&&((s.points<t.points||s.sum<t.sum)&&(t.place=t.ord),s.place=t.place,t.ord+=1,t.sum=s.sum,t.points=s.points),0===s.points&&(s.points="-"),s}),{class:null,place:1,ord:1,sum:null,points:null}).sort((function(t,s){return t.class<s.class?-1:t.class>s.class||(t.place||9999)>(s.place||9999)?1:(t.place||9999)<(s.place||9999)?-1:0}))}return[]},c_table:function(){var t=this;if(this.s_table.length&&this.s.club_ranking){var s,e=[],a=Object(l["a"])(this.s.stages);try{for(a.s();!(s=a.n()).done;){var n,r=s.value,i="stage"+r.id.toString(),u={},c=Object(l["a"])(this.s_table);try{for(c.s();!(n=c.n()).done;){var p=n.value;if(p[i]){p.class in u||(u[p.class]={}),p.club in u[p.class]||(u[p.class][p.club]=[]);var f=parseInt(p[i].split(" ")[0])||0;u[p.class][p.club].push(f)}}}catch(g){c.e(g)}finally{c.f()}for(var d=0,m=Object.values(u);d<m.length;d++){var h=m[d],v=function(s){var a=0;a=h[s].length>t.s.club_ranking_max?o["a"].sum(h[s].sort((function(t,s){return s-t})).splice(0,t.s.club_ranking_max)):o["a"].sum(h[s]);var n=e.findIndex((function(t){return t.club===s}));-1===n?(e.push({club:s,place:null,points:a}),e[e.length-1][i]=a):(i in e[n]?e[n][i]+=a:e[n][i]=a,e[n].points+=a)};for(var b in h)v(b)}}}catch(g){a.e(g)}finally{a.f()}return e.sort((function(t,s){return t.points>s.points?-1:t.points<s.points?1:0})).map((function(s){return s.points<t.points&&(t.place=t.ord),s.place=t.place,t.points=s.points,t.ord+=1,s}),{place:1,ord:1,points:null})}return[]}}),methods:{}},d=f,m=e("2877"),h=e("6544"),v=e.n(h),b=e("b0af"),g=e("99d9"),_=e("8fea"),x=e("8dd9"),y=e("2fa4"),O=e("8654"),j=Object(m["a"])(d,i,u,!1,null,null,null),C=j.exports;v()(j,{VCard:b["a"],VCardTitle:g["d"],VDataTable:_["a"],VSheet:x["a"],VSpacer:y["a"],VTextField:O["a"]});var S={components:{seriesSummary:C},data:function(){return{}},computed:Object(r["a"])(Object(r["a"])({},Object(p["d"])({user:function(t){return t.user.user}})),{},{s:function(){return this.$store.getters["series/seriesById"](parseInt(this.$route.params.id))}}),created:function(){var t=this;this.$store.dispatch("series/updateSeries",parseInt(this.$route.params.id)).catch((function(){t.$router.push("/series")}))}},k=S,V=(e("8278"),e("a523")),w=e("a722"),$=e("a797"),I=e("490a"),P=Object(m["a"])(k,a,n,!1,null,null,null);s["default"]=P.exports;v()(P,{VCard:b["a"],VCardText:g["c"],VCardTitle:g["d"],VContainer:V["a"],VLayout:w["a"],VOverlay:$["a"],VProgressCircular:I["a"]})},8278:function(t,s,e){"use strict";e("8b40")},"8b40":function(t,s,e){},a676:function(t,s,e){"use strict";var a=e("53ca"),n=e("b85c");e("d81d"),e("4de4"),e("caad"),e("2532");s["a"]={sum:function(t){return Array.isArray(t)&&t.length?t.reduce((function(t,s){return t+s})):null},participantScore:function(t,s){return this.sum(t.scorecards.filter((function(t){return t.round!==s})).map((function(t){return t.score})))},participantOrder:function(t,s){if(t.class<s.class)return-1;if(t.class>s.class)return 1;if(null!==t.shootoff&&null!==s.shootoff){if(t.shootoff>s.shootoff)return-1;if(t.shootoff<s.shootoff)return 1}return t.sum>s.sum?-1:t.sum<s.sum?1:t.x>s.x?-1:t.x<s.x?1:0},participantRank:function(t){var s,e={class:null,ord:1,sum:null,x:null},a=Object(n["a"])(t.sort(this.participantOrder));try{for(a.s();!(s=a.n()).done;){var r=s.value;r.class!==e.class&&(e.class=r.class,e.ord=1,e.place=1,e.sum=r.sum,e.x=r.x),("undefined"!==typeof r.shootoff&&null!==r.shootoff||r.sum<e.sum||r.x<e.x&&e.place>3)&&(e.place=e.ord),r["place"]=e.place,e.x=r.x,e.sum=r.sum,e.ord+=1}}catch(i){a.e(i)}finally{a.f()}},getClass:function(t,s){return s&&s.includes(t.age_group+"_"+t.style)?t.age_group+"_"+t.style:t.age_group+t.archer.gender+t.style},longestPrefix:function(t){for(var s=t[0],e=function(e){if(!1===t.every((function(t){return t.substring(0,e)===s.substring(0,e)})))return{v:s.substring(0,e-1)}},n=1;n<s.length;n++){var r=e(n);if("object"===Object(a["a"])(r))return r.v}return s}}}}]);
//# sourceMappingURL=chunk-3ccd90a2.2a2c1aee.js.map