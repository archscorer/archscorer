import{n as k,t as c}from"./newRecord.3825ed56.js";import{g as m,h as w,j as u,l as f,f as i,a as p,o as v,q as h,x as S,z as $,A}from"./index.27d05026.js";import{_ as F,a as x}from"./VRow.ad1e4ebc.js";import{b as I,a as _}from"./VSelect.1eec61dd.js";import{_ as R}from"./VDataTable.ac0f2e23.js";import{_ as b}from"./VDatePicker.eb5d6729.js";import"./VDialog.c566c3f1.js";import"./VChip.0fc94f43.js";var L=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t(m,{staticClass:"mt-5"},[t(w,[e._v("Records ")]),t(u,[t(F,[t(x,{staticClass:"flex-grow-1 flex-shrink-0",staticStyle:{"min-width":"180px","max-width":"100%"},attrs:{cols:"4"}},[t(I,{attrs:{dense:"",items:[{text:"--disabled--",value:null},{text:"Format",value:"format"},{text:"Class",value:"class"}],label:"organise archers by"},model:{value:e.group_by,callback:function(n){e.group_by=n},expression:"group_by"}})],1),e.user.perms&&e.user.perms.some(function(n){return n==="record"})?t(x,{attrs:{cols:"2"}},[t(k,{attrs:{record:e.record,vanilla:!0}})],1):e._e()],1),t(R,{attrs:{dense:"","mobile-breakpoint":300,headers:e.r_table_header,items:e.r_table,"items-per-page":50,"group-by":e.group_by,"multi-sort":""},scopedSlots:e._u([{key:"header.class",fn:function(n){var o=n.header;return[e._v(" "+e._s(o.text)+" "),t(c,{attrs:{filter:e.filters.class},on:{"update:filter":function(r){return e.$set(e.filters,"class",r)}}})]}},{key:"header.score",fn:function(n){var o=n.header;return[e._v(" "+e._s(o.text)+" "),t(f,{attrs:{top:"","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(r){var a=r.on,l=r.attrs;return[t(i,e._g(e._b({attrs:{icon:""}},"v-btn",l,!1),a),[t(p,{attrs:{small:"",color:e.filters.score.some(function(d){return d!==""})?"primary":""}},[e._v(" mdi-filter ")])],1)]}}],null,!0),model:{value:e.menu_score,callback:function(r){e.menu_score=r},expression:"menu_score"}},[t(m,[t(u,[t(_,{attrs:{autofocus:"",type:"number",label:"Scores from"},model:{value:e.filters.score[0],callback:function(r){e.$set(e.filters.score,0,r)},expression:"filters.score[0]"}})],1),t(u,[t(_,{attrs:{type:"number",label:"Scores to"},model:{value:e.filters.score[1],callback:function(r){e.$set(e.filters.score,1,r)},expression:"filters.score[1]"}})],1),t(v,[t(i,{attrs:{small:"",text:"",color:"primary"},on:{click:function(r){e.filters.score=["",""]}}},[e._v("Clean")]),t(h),t(i,{attrs:{small:"",text:"",color:"secondary"},on:{click:function(r){e.menu_score=!1}}},[e._v("Close")])],1)],1)],1)]}},{key:"header.archer",fn:function(n){var o=n.header;return[e._v(" "+e._s(o.text)+" "),t(c,{attrs:{filter:e.filters.archer},on:{"update:filter":function(r){return e.$set(e.filters,"archer",r)}}})]}},{key:"header.event",fn:function(n){var o=n.header;return[e._v(" "+e._s(o.text)+" "),t(c,{attrs:{filter:e.filters.event},on:{"update:filter":function(r){return e.$set(e.filters,"event",r)}}})]}},{key:"header.scope",fn:function(n){var o=n.header;return[e._v(" "+e._s(o.text)+" "),t(c,{attrs:{filter:e.filters.scope},on:{"update:filter":function(r){return e.$set(e.filters,"scope",r)}}})]}},{key:"header.date",fn:function(n){var o=n.header;return[e._v(" "+e._s(o.text)+" "),t(f,{attrs:{top:"","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(r){var a=r.on,l=r.attrs;return[t(i,e._g(e._b({attrs:{icon:""}},"v-btn",l,!1),a),[t(p,{attrs:{small:"",color:e.filters.date.some(function(d){return d!==""})?"primary":""}},[e._v(" mdi-filter ")])],1)]}}],null,!0),model:{value:e.menu_date,callback:function(r){e.menu_date=r},expression:"menu_date"}},[t(m,[t(u,[t(f,{attrs:{"close-on-content-click":!1,top:"","min-width":"270px"},scopedSlots:e._u([{key:"activator",fn:function(r){var a=r.on;return[t(_,e._g({attrs:{label:"Date from","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.filters.date[0],callback:function(l){e.$set(e.filters.date,0,l)},expression:"filters.date[0]"}},a))]}}],null,!0),model:{value:e.menu_date_from,callback:function(r){e.menu_date_from=r},expression:"menu_date_from"}},[t(b,{on:{input:function(r){e.menu_date_from=!1}},model:{value:e.filters.date[0],callback:function(r){e.$set(e.filters.date,0,r)},expression:"filters.date[0]"}})],1),t(f,{attrs:{"close-on-content-click":!1,top:"","min-width":"270px"},scopedSlots:e._u([{key:"activator",fn:function(r){var a=r.on;return[t(_,e._g({attrs:{label:"Date to","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.filters.date[1],callback:function(l){e.$set(e.filters.date,1,l)},expression:"filters.date[1]"}},a))]}}],null,!0),model:{value:e.menu_date_to,callback:function(r){e.menu_date_to=r},expression:"menu_date_to"}},[t(b,{on:{input:function(r){e.menu_date_to=!1}},model:{value:e.filters.date[1],callback:function(r){e.$set(e.filters.date,1,r)},expression:"filters.date[1]"}})],1)],1),t(v,[t(i,{attrs:{small:"",text:"",color:"primary"},on:{click:function(r){e.filters.date=["",""]}}},[e._v("Clean")]),t(h),t(i,{attrs:{small:"",text:"",color:"secondary"},on:{click:function(r){e.menu_date=!1}}},[e._v("Close")])],1)],1)],1)]}}])})],1)],1)},O=[];const j={components:{tableColumnFilter:c,newRecord:k},data:()=>({filters:{class:"",archer:"",event:"",scope:"",score:["",""],date:["",""]},menu_score:!1,menu_date:!1,menu_date_from:!1,menu_date_to:!1,format:{hunter:"IFAA Hunter",field:"IFAA Field",animal:"IFAA Animal (Marked distances)",flint:"IFAA Flint Indoor",indoor:"IFAA Indoor"},group_by:"format",record:{event:"",date:"",format:"",archer:"",age_group:"",gender:"",style:"",score:"",scope:""}}),computed:{...S({records:e=>e.statistics.records,user:e=>e.user.user}),r_table_header(){return[{text:"Format",value:"format"},{text:"Class",value:"class",filter:e=>e!=null&&this.filters.class!=null&&e.toString().toLowerCase().indexOf(this.filters.class.toLowerCase())!==-1,width:"100px"},{text:"Score",value:"score",filter:e=>{if(this.filters.score.some(s=>s!=="")){if(this.filters.score[0]!==""&&this.filters.score[1]==="")return e>=parseInt(this.filters.score[0]);if(this.filters.score[1]!==""&&this.filters.score[0]==="")return e<=parseInt(this.filters.score[1]);if(this.filters.score.every(s=>s!==""))return parseInt(this.filters.score[0])<=e&&e<=parseInt(this.filters.score[1])}return e!=null}},{text:"Archer",value:"archer",filter:e=>e!=null&&this.filters.archer!=null&&e.toString().toLowerCase().indexOf(this.filters.archer.toLowerCase())!==-1,width:"175px"},{text:"Event",value:"event",filter:e=>e!=null&&this.filters.event!=null&&e.toString().toLowerCase().indexOf(this.filters.event.toLowerCase())!==-1},{text:"national/EU/W",value:"scope",filter:e=>e!=null&&this.filters.scope!=null&&e.toString().toLowerCase().indexOf(this.filters.scope.toLowerCase())!==-1},{text:"Date",value:"date",filter:e=>{if(this.filters.date.some(s=>s!=="")){if(this.filters.date[0]!==""&&this.filters.date[1]==="")return e>=this.filters.date[0];if(this.filters.date[1]!==""&&this.filters.date[0]==="")return e<=this.filters.date[1];if(this.filters.date.every(s=>s!==""))return this.filters.date[0]<=e&&e<=this.filters.date[1]}return e!=null},width:"120px"}]},r_table(){return this.records.length?this.records.map(e=>Object.assign({class:e.age_group+e.gender+e.style},e,{format:this.format[e.format]})):[]}}},g={};var E=$(j,L,O,!1,D,"e539ee4a",null,null);function D(e){for(let s in g)this[s]=g[s]}var C=function(){return E.exports}(),M=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t(A,[t(C)],1)},V=[];const z={name:"StatisticsRecords",components:{Records:C},data:()=>({})},y={};var T=$(z,M,V,!1,q,null,null,null);function q(e){for(let s in y)this[s]=y[s]}var P=function(){return T.exports}();export{P as default};
