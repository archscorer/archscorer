import{_ as x,b as W,m as S,P as G,p as J,r as K,a as c,k as Q,i as P,C as X,V as Z,c as ee,d as te,e as F,f as o,g as v,h as V,j as C,l as E,n as p,o as g,q as b,s as w,t as O,u as h,v as _,w as m,x as z,y as se,z as A,A as H,B as y,D as R,E as ne}from"./index.41fba636.js";import{e as q}from"./eventParticipantCategories.66b5a8f2.js";import{_ as ae}from"./VDialog.2639cbbc.js";import{_ as T,a as u}from"./VSelect.36dd0b98.js";import{_ as D}from"./VForm.26b10d65.js";import{_ as I}from"./VDatePicker.4fc9c073.js";import{_ as ie}from"./VTextarea.0824fc42.js";import{_ as L}from"./VAutocomplete.211b738d.js";import{_ as M}from"./VAlert.0c0491e8.js";import{_ as l,a as r}from"./VRow.11b34e14.js";import{_ as d}from"./VChip.f739304b.js";const re=S(x,J("stepper"),G);var oe=re.extend({name:"v-stepper",provide(){return{stepClick:this.stepClick,isVertical:this.vertical}},props:{altLabels:Boolean,nonLinear:Boolean,flat:Boolean,vertical:Boolean},data(){const e={isBooted:!1,steps:[],content:[],isReverse:!1};return e.internalLazyValue=this.value!=null?this.value:(e[0]||{}).step||1,e},computed:{classes(){return{"v-stepper--flat":this.flat,"v-stepper--is-booted":this.isBooted,"v-stepper--vertical":this.vertical,"v-stepper--alt-labels":this.altLabels,"v-stepper--non-linear":this.nonLinear,...x.options.computed.classes.call(this)}},styles(){return{...x.options.computed.styles.call(this)}}},watch:{internalValue(e,i){this.isReverse=Number(e)<Number(i),i&&(this.isBooted=!0),this.updateView()}},created(){this.$listeners.input&&W("@input","@change",this)},mounted(){this.updateView()},methods:{register(e){e.$options.name==="v-stepper-step"?this.steps.push(e):e.$options.name==="v-stepper-content"&&(e.isVertical=this.vertical,this.content.push(e))},unregister(e){e.$options.name==="v-stepper-step"?this.steps=this.steps.filter(i=>i!==e):e.$options.name==="v-stepper-content"&&(e.isVertical=this.vertical,this.content=this.content.filter(i=>i!==e))},stepClick(e){this.$nextTick(()=>this.internalValue=e)},updateView(){for(let e=this.steps.length;--e>=0;)this.steps[e].toggle(this.internalValue);for(let e=this.content.length;--e>=0;)this.content[e].toggle(this.internalValue,this.isReverse)}},render(e){return e(this.tag,{staticClass:"v-stepper",class:this.classes,style:this.styles},this.$slots.default)}});const le=S(X,P("stepper","v-stepper-step","v-stepper"));var k=le.extend().extend({name:"v-stepper-step",directives:{ripple:K},inject:["stepClick"],props:{color:{type:String,default:"primary"},complete:Boolean,completeIcon:{type:String,default:"$complete"},editable:Boolean,editIcon:{type:String,default:"$edit"},errorIcon:{type:String,default:"$error"},rules:{type:Array,default:()=>[]},step:[Number,String]},data(){return{isActive:!1,isInactive:!0}},computed:{classes(){return{"v-stepper__step--active":this.isActive,"v-stepper__step--editable":this.editable,"v-stepper__step--inactive":this.isInactive,"v-stepper__step--error error--text":this.hasError,"v-stepper__step--complete":this.complete}},hasError(){return this.rules.some(e=>e()!==!0)}},mounted(){this.stepper&&this.stepper.register(this)},beforeDestroy(){this.stepper&&this.stepper.unregister(this)},methods:{click(e){e.stopPropagation(),this.$emit("click",e),this.editable&&this.stepClick(this.step)},genIcon(e){return this.$createElement(c,e)},genLabel(){return this.$createElement("div",{staticClass:"v-stepper__label"},this.$slots.default)},genStep(){const e=!this.hasError&&(this.complete||this.isActive)?this.color:!1;return this.$createElement("span",this.setBackgroundColor(e,{staticClass:"v-stepper__step__step"}),this.genStepContent())},genStepContent(){const e=[];return this.hasError?e.push(this.genIcon(this.errorIcon)):this.complete?this.editable?e.push(this.genIcon(this.editIcon)):e.push(this.genIcon(this.completeIcon)):e.push(String(this.step)),e},keyboardClick(e){e.keyCode===Q.space&&this.click(e)},toggle(e){this.isActive=e.toString()===this.step.toString(),this.isInactive=Number(e)<Number(this.step)}},render(e){return e("div",{attrs:{tabindex:this.editable?0:-1},staticClass:"v-stepper__step",class:this.classes,directives:[{name:"ripple",value:this.editable}],on:{click:this.click,keydown:this.keyboardClick}},[this.genStep(),this.genLabel()])}});const ce=S(P("stepper","v-stepper-content","v-stepper"));var $=ce.extend().extend({name:"v-stepper-content",inject:{isVerticalProvided:{from:"isVertical"}},props:{step:{type:[Number,String],required:!0}},data(){return{height:0,isActive:null,isReverse:!1,isVertical:this.isVerticalProvided}},computed:{computedTransition(){return(this.$vuetify.rtl?!this.isReverse:this.isReverse)?Z:ee},styles(){return this.isVertical?{height:te(this.height)}:{}}},watch:{isActive(e,i){if(e&&i==null){this.height="auto";return}!this.isVertical||(this.isActive?this.enter():this.leave())}},mounted(){this.$refs.wrapper.addEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.register(this)},beforeDestroy(){this.$refs.wrapper.removeEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.unregister(this)},methods:{onTransition(e){!this.isActive||e.propertyName!=="height"||(this.height="auto")},enter(){let e=0;requestAnimationFrame(()=>{e=this.$refs.wrapper.scrollHeight}),this.height=0,setTimeout(()=>this.isActive&&(this.height=e||"auto"),450)},leave(){this.height=this.$refs.wrapper.clientHeight,setTimeout(()=>this.height=0,10)},toggle(e,i){this.isActive=e.toString()===this.step.toString(),this.isReverse=i}},render(e){const i={staticClass:"v-stepper__content"},t={staticClass:"v-stepper__wrapper",style:this.styles,ref:"wrapper"};this.isVertical||(i.directives=[{name:"show",value:this.isActive}]);const s=e("div",t,[this.$slots.default]),n=e("div",i,[s]);return e(this.computedTransition,{on:this.$listeners},[n])}});const pe=F("v-stepper__header"),ue=F("v-stepper__items");var _e=function(){var e=this,i=e.$createElement,t=e._self._c||i;return e.user.id!==null?t(ae,{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(s){var n=s.on;return[t(o,e._g({attrs:{color:"secondary",dark:"",absolute:"",top:"",right:"",fab:""}},n),[t(c,[e._v("mdi-plus")])],1)]}}],null,!1,569578594),model:{value:e.dialog,callback:function(s){e.dialog=s},expression:"dialog"}},[t(oe,{attrs:{"alt-labels":""},model:{value:e.e1,callback:function(s){e.e1=s},expression:"e1"}},[t(pe,[t(k,{attrs:{complete:e.e1>1,step:"1"}},[e._v("General info")]),t(T),t(k,{attrs:{complete:e.e1>2,step:"2"}},[e._v("Rounds "),t("small",[e._v("Manage format")])]),t(T),t(k,{attrs:{step:"3"}},[e._v("Additional details "),t("small",[e._v("Allow registration, etc.")])])],1),t(ue,[t($,{attrs:{step:"1"}},[t(v,[t(V,[e._v("Add new archery event")]),t(C,[t(D,{model:{value:e.valid_e1,callback:function(s){e.valid_e1=s},expression:"valid_e1"}},[t(l,{attrs:{dense:""}},[t(r,[t(u,{attrs:{autofocus:"",rules:[function(s){return!!s||"Name is required"}],label:"Event name"},model:{value:e.event.name,callback:function(s){e.$set(e.event,"name",s)},expression:"event.name"}})],1)],1),t(l,{attrs:{dense:""}},[t(r,{attrs:{cols:"6"}},[t(E,{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"270px"},scopedSlots:e._u([{key:"activator",fn:function(s){var n=s.on;return[t(u,e._g({attrs:{label:"Start date","prepend-icon":"mdi-calendar",readonly:"",rules:[function(a){return!!a||"Start date is required"}]},model:{value:e.event.date_start,callback:function(a){e.$set(e.event,"date_start",a)},expression:"event.date_start"}},n))]}}],null,!1,3929971102),model:{value:e.date_start_menu,callback:function(s){e.date_start_menu=s},expression:"date_start_menu"}},[t(I,{on:{input:function(s){e.date_start_menu=!1}},model:{value:e.event.date_start,callback:function(s){e.$set(e.event,"date_start",s)},expression:"event.date_start"}})],1)],1),t(r,{attrs:{cols:"6"}},[e.multi_day===!1?t(p,{attrs:{label:"Multiple days?"},model:{value:e.multi_day,callback:function(s){e.multi_day=s},expression:"multi_day"}}):t(E,{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"270px"},scopedSlots:e._u([{key:"activator",fn:function(s){var n=s.on;return[t(u,e._g({attrs:{label:"End date","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.event.date_end,callback:function(a){e.$set(e.event,"date_end",a)},expression:"event.date_end"}},n))]}}],null,!1,1688165335),model:{value:e.date_end_menu,callback:function(s){e.date_end_menu=s},expression:"date_end_menu"}},[t(I,{on:{input:function(s){e.date_end_menu=!1}},model:{value:e.event.date_end,callback:function(s){e.$set(e.event,"date_end",s)},expression:"event.date_end"}})],1)],1)],1),t(l,{attrs:{dense:""}},[t(r,{attrs:{cols:"12"}},[t(ie,{attrs:{outlined:"",label:"Event details"},model:{value:e.event.description,callback:function(s){e.$set(e.event,"description",s)},expression:"event.description"}})],1)],1)],1)],1),t(g,[t(b),t(o,{attrs:{text:""},on:{click:function(s){e.dialog=!1}}},[e._v("Close")]),t(o,{attrs:{color:"primary",disabled:!e.valid_e1},on:{click:function(s){e.e1=2}}},[e._v("Next")])],1)],1)],1),t($,{attrs:{step:"2"}},[t(v,[t(V,[e._v("Add rounds/course")]),t(C,[t(D,{model:{value:e.valid_e2,callback:function(s){e.valid_e2=s},expression:"valid_e2"}},[e._l(e.event.rounds,function(s,n){return t(l,{key:n,attrs:{dense:""}},[t(r,{attrs:{cols:"4"}},[t(u,{attrs:{label:"Round description"},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("strong",{staticClass:"lowered"},[e._v(e._s(n+1)+".")])]},proxy:!0}],null,!0),model:{value:e.event.rounds[n].label,callback:function(a){e.$set(e.event.rounds[n],"label",a)},expression:"event.rounds[index].label"}})],1),t(r,{attrs:{cols:"4"}},[t(L,{attrs:{rules:[function(a){return!!a||"Round course is mandatory"}],autocomplete:"",items:e.courses,label:"Round type","item-text":"name","item-value":"id"},model:{value:e.event.rounds[n].course,callback:function(a){e.$set(e.event.rounds[n],"course",a)},expression:"event.rounds[index].course"}})],1),t(r,{attrs:{cols:"2"}},[t(p,{attrs:{label:e.event.rounds[n].is_open?"Open":""},model:{value:e.event.rounds[n].is_open,callback:function(a){e.$set(e.event.rounds[n],"is_open",a)},expression:"event.rounds[index].is_open"}})],1),t(r,{attrs:{cols:"2"}},[t(o,{staticClass:"lowered",attrs:{text:"",color:"error",icon:"",fab:""},on:{click:function(a){return e.delRound(n)}}},[t(c,{attrs:{size:"30"}},[e._v("mdi-minus")])],1)],1)],1)}),t(l,{attrs:{dense:""}},[t(r,{attrs:{cols:"10"}}),t(r,{attrs:{cols:"2"}},[t(o,{attrs:{text:"",color:"primary",icon:"",fab:""},on:{click:e.addRound}},[t(c,{attrs:{size:"35"}},[e._v("mdi-plus")])],1)],1)],1),t(q,{attrs:{event:e.event}})],2)],1),t(g,[t(o,{on:{click:function(s){e.e1=1}}},[e._v("Back")]),t(b),t(o,{attrs:{text:""},on:{click:function(s){e.dialog=!1}}},[e._v("Close")]),t(o,{attrs:{color:"primary",disabled:!e.valid_e2},on:{click:function(s){e.e1=3}}},[e._v("Next")])],1)],1)],1),t($,{attrs:{step:"3"}},[t(v,[t(l,{attrs:{dense:""}},[t(r,{attrs:{cols:"6"}},[t(L,{attrs:{autocomplete:"",items:e.event_type_choices,label:"Event visibility class"},model:{value:e.event.type,callback:function(s){e.$set(e.event,"type",s)},expression:"event.type"}})],1),t(r,{attrs:{cols:"6"}},[t(p,{attrs:{label:e.event.is_open?"Registration is open*":"Registration is closed"},model:{value:e.event.is_open,callback:function(s){e.$set(e.event,"is_open",s)},expression:"event.is_open"}}),t(p,{attrs:{label:e.event.use_level_class?"Use Archer Classification Classes":"No Classification Classes"},model:{value:e.event.use_level_class,callback:function(s){e.$set(e.event,"use_level_class",s)},expression:"event.use_level_class"}})],1)],1),t(l,{attrs:{dense:""}},[t(r,{attrs:{cols:"12"}},[e.event.type==="open"?t(M,{attrs:{border:"bottom",type:"warning","colored-border":"",elevation:"2"}},[t("small",[t("p",[e._v(" 'Open' type of event is reserved for official / public archery events only. This type of event can be seen by everybody in the events page. ")])])]):e._e(),e.event.type==="club"?t(M,{attrs:{border:"bottom",type:"info","colored-border":"",elevation:"2"}},[t("small",[t("p",[e._v(" 'Club' type of event should be used for club level events. Club members can see this type of events on events page. Archers outside the club can still register by event link. ")])])]):e._e()],1)],1),t(l,[t(r,{attrs:{cols:"5"}},[t(p,{attrs:{label:e.event.catering?"With catering**":"No catering"},model:{value:e.event.catering,callback:function(s){e.$set(e.event,"catering",s)},expression:"event.catering"}})],1),t(r,{attrs:{cols:"7"}},[e.event.catering?t(w,{attrs:{dense:"",flat:""}},[t(O,[e._v("Meals")]),e._l(e.event.catering_choices,function(s,n){return t(h,{key:n,attrs:{inactive:""}},[t(_,[t(u,{attrs:{rules:[function(a){return!!a||"Write something"}],label:"meal (price)",counter:"25"},model:{value:e.event.catering_choices[n],callback:function(a){e.$set(e.event.catering_choices,n,a)},expression:"event.catering_choices[i]"}})],1),t(m,[t(o,{attrs:{text:"",color:"error",icon:""},on:{click:function(a){return e.delMeal(n)}}},[t(c,{attrs:{size:"35"}},[e._v("mdi-minus")])],1)],1)],1)}),t(h,{attrs:{inactive:""}},[t(_,[e._v(" Add meal ")]),t(m,[t(o,{attrs:{text:"",color:"primary",icon:""},on:{click:e.addMeal}},[t(c,{attrs:{size:"35"}},[e._v("mdi-plus")])],1)],1)],1)],2):e._e()],1)],1),t("small",[t("p",[e._v("* Events with 'Registration is open' can be found by event URL. Click 'Finish' first and then you can navigate to the event and copy the URL. The 'Open' events are discoverable by anyone on the "),t("router-link",{attrs:{to:"events"}},[e._v("Events page")]),e._v(". The 'Club' events are discoverable by the club memebers only.")],1),t("p",[e._v("** Catering options should be by meal.")])]),t(g,[t(o,{on:{click:function(s){e.e1=2}}},[e._v("Back")]),t(b),t(o,{attrs:{text:""},on:{click:function(s){e.dialog=!1}}},[e._v("Close")]),t(o,{attrs:{color:"primary"},on:{click:function(s){e.addEvent(e.beforeSubmit()),e.dialog=!1,e.e1=1}}},[e._v("Finish")])],1)],1)],1)],1)],1)],1):e._e()},de=[];const ve={components:{eventParticipantCategories:q},data:()=>({dialog:!1,e1:1,event:{name:"",date_start:new Date().toISOString().substr(0,10),date_end:"",description:"",type:"private",is_open:!1,rounds:[{label:"",course:null,is_open:!0}],catering:!1,catering_choices:[""],age_style_used:[""],admins:[]},event_type_choices:[{text:"Private",value:"private"},{text:"Club",value:"club"},{text:"Open",value:"open"}],valid_e1:!1,date_start_menu:!1,date_end_menu:!1,multi_day:!1,valid_e2:!1}),watch:{multi_day:{handler(){this.event.date_end=this.event.date_start}}},computed:{dateRangeText(){return this.dates.join(" ~ ")},...z({user:e=>e.user.user,courses:e=>e.courses.courses})},methods:{addRound(){this.event.rounds.push({label:"",course:null,is_open:!0})},delRound(e){this.event.rounds.splice(e,1)},addMeal(){this.event.catering_choices.push("")},delMeal(e){this.event.catering_choices.splice(e,1)},beforeSubmit(){return(this.event.date_end===""||new Date(this.event.date_end)<new Date(this.event.date_start))&&(this.event.date_end=this.event.date_start),Object.assign({},this.event,{catering_choices:this.event.catering_choices.join("|"),age_style_used:this.event.age_style_used.join(",")})},...se("events",["addEvent"])}},j={};var he=A(ve,_e,de,!1,me,"123740fd",null,null);function me(e){for(let i in j)this[i]=j[i]}var U=function(){return he.exports}(),fe=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t(H,[e._l(e.events_list[0],function(s,n){return t(w,{key:n,staticClass:"my-2",attrs:{subheader:"",dense:""}},[s.length?t(O,{staticClass:"text-overline font-weight-black"},[e._v(e._s(n==="ongoing"?"Held today":n+" events"))]):e._e(),e._l(s,function(a){return t(h,{key:"event"+a.id,attrs:{to:{name:"event",params:{id:a.id}}}},[t(_,[t(y,[e._v(e._s(a.name)+" "),t("span",{staticClass:"text-overline"},[e._v(e._s(a.indays?a.indays:""))]),e._v(" "+e._s(a.creator==e.user.email?"*":""))]),t(R,[a.date_start!=a.date_end?[e._v(" from "+e._s(a.date_start)+" to "+e._s(a.date_end)+" ")]:[e._v(" on "+e._s(a.date_start)+" ")],e._v(" / "+e._s(Array.isArray(a.participants)?a.participants.length:a.participants)+" participant(s) ")],2)],1),t(m,[a.type!=="open"?t(d,{attrs:{small:"",color:e.chip_color(a.type)},domProps:{textContent:e._s(a.type)}}):e._e(),e._l(e.tags(a),function(f){return t(d,{key:f.label,attrs:{small:"",color:f.color},domProps:{textContent:e._s(f.label)}})})],2)],1)})],2)}),e._l(Object.keys(e.events_list[1]).reverse(),function(s){return t(w,{key:s,attrs:{subheader:"",dense:""}},[t(ne,{scopedSlots:e._u([{key:"activator",fn:function(){return[t(_,[t(y,[e._v(e._s(s))])],1)]},proxy:!0}],null,!0)},e._l(e.events_list[1][s],function(n){return t(h,{key:"event"+n.id,attrs:{to:{name:"event",params:{id:n.id}}}},[t(_,[t(y,[e._v(e._s(n.name)+" "),t("span",{staticClass:"text-overline"},[e._v(e._s(n.indays?n.indays:""))]),e._v(" "+e._s(n.creator==e.user.email?"*":""))]),t(R,[n.date_start!=n.date_end?[e._v(" from "+e._s(n.date_start)+" to "+e._s(n.date_end)+" ")]:[e._v(" on "+e._s(n.date_start)+" ")],e._v(" / "+e._s(Array.isArray(n.participants)?n.participants.length:n.participants)+" participant(s) ")],2)],1),t(m,[n.type!=="open"?t(d,{attrs:{small:"",color:e.chip_color(n.type)},domProps:{textContent:e._s(n.type)}}):e._e(),e._l(e.tags(n),function(a){return t(d,{key:a.label,attrs:{small:"",color:a.color},domProps:{textContent:e._s(a.label)}})})],2)],1)}),1)],1)})],2)},ge=[];const be={computed:{...z({events:e=>e.events.events,user:e=>e.user.user}),events_list(){let e={upcoming:[],ongoing:[],past:[]},i={};if(this.events)for(let t of this.events)if(new Date(t.date_start)>new Date){let s=Math.ceil(Math.abs(new Date(t.date_start)-new Date)/864e5);t.indays=s>1?" (in "+s+" days)":" (tomorrow)",e.upcoming.push(t)}else if(new Date(t.date_end).getFullYear()!=new Date().getFullYear()){let s=new Date(t.date_end).getFullYear();Object.prototype.hasOwnProperty.call(i,s)||(i[s]=[]),i[s].push(t)}else new Date(t.date_end).setHours(23,59)<new Date?e.past.push(t):e.ongoing.push(t);return[e,i]}},methods:{chip_color(e){return e==="private"?"primary":e==="club"?"secondary":""},tags(e){return e.tags?e.tags.split(",").map(i=>{let[t,s]=i.split("|");return{label:t,color:s}}):[]}},created(){this.$store.dispatch("events/getEvents")}},B={};var ye=A(be,fe,ge,!1,ke,null,null,null);function ke(e){for(let i in B)this[i]=B[i]}var Y=function(){return ye.exports}(),$e=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t(H,[t(v,[t(C,{staticClass:"pt-8 mt-5"},[t(Y),t("small",[t("p",[e._v("events created by you are marked with '*'")])]),t(U)],1)],1)],1)},xe=[];const Ce={name:"Events",components:{EventsAdd:U,EventsList:Y},data:()=>({})},N={};var we=A(Ce,$e,xe,!1,Se,null,null,null);function Se(e){for(let i in N)this[i]=N[i]}var Ne=function(){return we.exports}();export{Ne as default};
